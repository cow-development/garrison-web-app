<div class="container">

  <div class="cost">
    <div class="resource">
      <div class="icon">
        <svg height="13pt" viewBox="0 0 128 128" width="13pt" xmlns="http://www.w3.org/2000/svg">
          <g>
            <path d="m20.875 57.235v12.8c0 3.535 13.152 6.4 29.375 6.4s29.375-2.867 29.375-6.4v-12.8z" fill="#fca40b" />
            <ellipse cx="50.25" cy="57.235" fill="#fccf23" rx="29.375" ry="6.402" />
            <path d="m48.375 76.2v12.8c0 3.536 13.152 6.4 29.375 6.4s29.375-2.866 29.375-6.4v-12.8z" fill="#fca40b" />
            <ellipse cx="77.75" cy="76.197" fill="#fccf23" rx="29.375" ry="6.402" />
            <path d="m34.625 39v12.8c0 3.535 13.152 6.4 29.375 6.4s29.375-2.866 29.375-6.4v-12.8z" fill="#fca40b" />
            <ellipse cx="64" cy="39" fill="#fccf23" rx="29.375" ry="6.402" />
          </g>
        </svg>
      </div>
      <div class="total">
        <p smooth-text-changer>
          {{ cost.gold }}
        </p>
      </div>
    </div>
    <div class="resource">
      <div class="icon">
        <svg id="Capa_1" enable-background="new 0 0 497 497" height="13pt" viewBox="0 0 497 497" width="13pt"
          xmlns="http://www.w3.org/2000/svg">
          <g>
            <path d="m361 248.499-150.5 22.5-100.5-22.5s-50 0-50-68 50-68 50-68h251z" fill="#ab7b64" />
            <path
              d="m361 236.139v12.36l-144.865 15.665-106.135-15.665s-23.99 0-38.73-22.61c8.26 2.61 14.49 2.61 14.49 2.61h236.23c9.53 5.11 20.43 8 32.01 8 2.36 0 4.7-.12 7-.36z"
              fill="#9a6a53" />
            <path d="m166 163.999h-104.89c.79-5.58 1.99-10.56 3.49-15h101.4c4.14 0 7.5 3.36 7.5 7.5s-3.36 7.5-7.5 7.5z"
              fill="#ab7b64" />
            <path
              d="m214.5 204.499c0 4.14-3.36 7.5-7.5 7.5h-142.4c-1.5-4.44-2.7-9.42-3.49-15h145.89c4.14 0 7.5 3.36 7.5 7.5z"
              fill="#ab7b64" />
            <path
              d="m244.5 156.499c0 4.14-3.36 7.5-7.5 7.5h-30c-4.14 0-7.5-3.36-7.5-7.5s3.36-7.5 7.5-7.5h30c4.14 0 7.5 3.36 7.5 7.5z"
              fill="#ab7b64" />
            <path
              d="m302.5 204.499c0 4.14-3.36 7.5-7.5 7.5h-40c-4.14 0-7.5-3.36-7.5-7.5s3.36-7.5 7.5-7.5h40c4.14 0 7.5 3.36 7.5 7.5z"
              fill="#ab7b64" />
            <g>
              <path
                d="m173.5 156.499c0 4.14-3.36 7.5-7.5 7.5h-104.89c.79-5.58 1.99-10.56 3.49-15h101.4c4.14 0 7.5 3.36 7.5 7.5z"
                fill="#9a6a53" />
            </g>
            <g>
              <path
                d="m244.5 156.499c0 4.14-3.36 7.5-7.5 7.5h-30c-4.14 0-7.5-3.36-7.5-7.5s3.36-7.5 7.5-7.5h30c4.14 0 7.5 3.36 7.5 7.5z"
                fill="#9a6a53" />
            </g>
            <g>
              <path
                d="m214.5 204.499c0 4.14-3.36 7.5-7.5 7.5h-142.4c-1.5-4.44-2.7-9.42-3.49-15h145.89c4.14 0 7.5 3.36 7.5 7.5z"
                fill="#9a6a53" />
            </g>
            <g>
              <path d="m315 211.999h-60c-4.14 0-7.5-3.36-7.5-7.5s3.36-7.5 7.5-7.5h50 .02z" fill="#9a6a53" />
            </g>
            <circle cx="361" cy="180.499" fill="#f3d69e" r="68" />
            <path
              d="m429 180.499c0 37.56-30.44 68-68 68-18.35 0-35-7.27-47.23-19.09 10.69 7.01 23.48 11.09 37.23 11.09 37.56 0 68-30.44 68-68 0-19.21-7.96-36.56-20.77-48.91 18.53 12.15 30.77 33.1 30.77 56.91z"
              fill="#efcb83" />
            <g>
              <path
                d="m326.764 204.471c-2.789 0-5.466-1.562-6.76-4.241-2.988-6.188-4.504-12.827-4.504-19.73 0-25.089 20.411-45.5 45.5-45.5 4.143 0 7.5 3.357 7.5 7.5s-3.357 7.5-7.5 7.5c-16.817 0-30.5 13.683-30.5 30.5 0 4.626 1.014 9.07 3.012 13.209 1.801 3.729.237 8.214-3.493 10.015-1.051.507-2.163.747-3.255.747z"
                fill="#edc472" />
            </g>
            <g>
              <path
                d="m361 225.999c-4.781 0-9.497-.743-14.018-2.21-3.94-1.277-6.099-5.508-4.82-9.447 1.278-3.942 5.511-6.103 9.447-4.82 3.024.98 6.184 1.478 9.391 1.478 16.817 0 30.5-13.683 30.5-30.5 0-4.143 3.357-7.5 7.5-7.5s7.5 3.357 7.5 7.5c0 25.088-20.411 45.499-45.5 45.499z"
                fill="#edc472" />
            </g>
            <path d="m293 384.499h-243s-50 1.184-50-67.408 50-68.592 50-68.592h243z" fill="#ab7b64" />
            <path d="m293 364.499v20h-243s-22.63.53-37.44-20z" fill="#9a6a53" />
            <g fill="#ab7b64">
              <path
                d="m52.89 297.999h-51.41c.94-5.61 2.29-10.59 3.95-15h47.46c4.14 0 7.5 3.36 7.5 7.5s-3.36 7.5-7.5 7.5z" />
              <path
                d="m101.5 341.499c0 4.14-3.36 7.5-7.5 7.5h-89.32c-1.51-4.43-2.72-9.4-3.53-15h92.85c4.14 0 7.5 3.36 7.5 7.5z" />
              <path
                d="m236.5 341.499c0 4.14-3.36 7.5-7.5 7.5h-55c-4.14 0-7.5-3.36-7.5-7.5s3.36-7.5 7.5-7.5h55c4.14 0 7.5 3.36 7.5 7.5z" />
              <path
                d="m230 297.999h-110c-4.14 0-7.5-3.36-7.5-7.5s3.36-7.5 7.5-7.5h110c4.14 0 7.5 3.36 7.5 7.5s-3.36 7.5-7.5 7.5z" />
              <path d="m429 248.499h-140.479v136l141.607-.016z" />
            </g>
            <path d="m430.13 384.479-137.13.02v-20l136.96-.02z" fill="#9a6a53" />
            <circle cx="429" cy="316.499" fill="#f3d69e" r="68" />
            <g>
              <path
                d="m417.912 360.351c-.727 0-1.465-.106-2.195-.33-18.969-5.799-32.217-23.695-32.217-43.521 0-15.906 8.111-30.398 21.696-38.766 3.526-2.172 8.147-1.075 10.319 2.452 2.173 3.527 1.074 8.147-2.452 10.319-9.119 5.616-14.563 15.334-14.563 25.994 0 13.291 8.883 25.289 21.602 29.178 3.962 1.211 6.191 5.403 4.979 9.364-.987 3.231-3.958 5.31-7.169 5.31z"
                fill="#edc472" />
            </g>
            <g>
              <path
                d="m452.034 354.208c-2.258 0-4.489-1.015-5.965-2.946-2.516-3.291-1.886-7.998 1.405-10.513 7.643-5.84 12.025-14.679 12.025-24.25 0-10.132-5.035-19.586-13.47-25.288-3.431-2.319-4.332-6.982-2.012-10.414 2.32-3.43 6.982-4.333 10.414-2.012 12.565 8.495 20.067 22.594 20.067 37.714 0 14.284-6.531 27.468-17.918 36.168-1.357 1.039-2.958 1.541-4.546 1.541z"
                fill="#edc472" />
            </g>
            <g>
              <path
                d="m237.5 290.499c0 4.14-3.36 7.5-7.5 7.5h-110c-4.14 0-7.5-3.36-7.5-7.5s3.36-7.5 7.5-7.5h110c4.14 0 7.5 3.36 7.5 7.5z"
                fill="#9a6a53" />
            </g>
            <g>
              <path
                d="m60.39 290.499c0 4.14-3.36 7.5-7.5 7.5h-51.41c.94-5.61 2.29-10.59 3.95-15h47.46c4.14 0 7.5 3.36 7.5 7.5z"
                fill="#9a6a53" />
            </g>
            <g>
              <path
                d="m101.5 341.499c0 4.14-3.36 7.5-7.5 7.5h-89.32c-1.51-4.43-2.72-9.4-3.53-15h92.85c4.14 0 7.5 3.36 7.5 7.5z"
                fill="#9a6a53" />
            </g>
            <g>
              <path
                d="m236.5 341.499c0 4.14-3.36 7.5-7.5 7.5h-55c-4.14 0-7.5-3.36-7.5-7.5s3.36-7.5 7.5-7.5h55c4.14 0 7.5 3.36 7.5 7.5z"
                fill="#9a6a53" />
            </g>
            <circle cx="293" cy="316.499" fill="#f3d69e" r="68" />
            <g>
              <path
                d="m273.419 356.561c-1.32 0-2.655-.348-3.868-1.079-13.602-8.207-22.051-23.145-22.051-38.982 0-7.144 1.708-14.271 4.94-20.611 1.881-3.688 6.4-5.157 10.088-3.275 3.69 1.881 5.157 6.397 3.275 10.088-2.192 4.301-3.304 8.943-3.304 13.799 0 10.775 5.533 20.547 14.801 26.139 3.546 2.141 4.687 6.75 2.547 10.297-1.409 2.332-3.887 3.624-6.428 3.624z"
                fill="#edc472" />
            </g>
            <g>
              <path
                d="m307.78 359.01c-2.921 0-5.697-1.717-6.908-4.576-1.616-3.813.165-8.216 3.979-9.832 11.328-4.799 18.648-15.83 18.648-28.103 0-16.817-13.683-30.5-30.5-30.5-4.143 0-7.5-3.357-7.5-7.5s3.357-7.5 7.5-7.5c25.089 0 45.5 20.411 45.5 45.5 0 18.308-10.911 34.761-27.797 41.914-.954.406-1.946.597-2.922.597z"
                fill="#edc472" />
            </g>
            <path
              d="m497 316.499c0 37.56-30.44 68-68 68-27.58 0-51.32-16.41-61.99-40 12.36 16.97 32.38 28 54.99 28 37.56 0 68-30.44 68-68 0-9.98-2.15-19.45-6.01-27.99 8.19 11.22 13.01 25.04 13.01 39.99z"
              fill="#efcb83" />
            <path
              d="m361 316.499c0 5.03-.55 9.92-1.58 14.64-6.69 30.52-33.89 53.36-66.42 53.36-27.58 0-51.32-16.41-61.99-40 12.36 16.97 32.38 28 54.99 28 37.56 0 68-30.44 68-68 0-9.98-2.15-19.45-6.01-27.99 3.02 4.12 5.57 8.6 7.59 13.35 3.49 8.18 5.42 17.18 5.42 26.64z"
              fill="#efcb83" />
          </g>
        </svg>
      </div>
      <div class="total">
        <p smooth-text-changer>
          {{ cost.wood }}
        </p>
      </div>
    </div>
    <div class="resource">
      <div class="icon">
        <svg id="Capa_1" enable-background="new 0 0 497.137 497.137" height="13pt" viewBox="0 0 497.137 497.137"
          width="13pt" xmlns="http://www.w3.org/2000/svg">
          <g>
            <g>
              <path d="m343.289 304.218 102.359-255.169-29.026-12.264-107.278 267.433z" fill="#e3b783" />
            </g>
            <g>
              <path
                d="m345.822 331.863-36.53-2.055-19.805-21.748 7.088-16.774c2.217-5.247 8.268-7.703 13.514-5.486l37.335 15.775c5.247 2.217 7.703 8.268 5.486 13.514z"
                fill="#c8c3ca" />
            </g>
            <g>
              <path
                d="m327.94 446.965-36.053 21.268c-23.283 13.734-53.253 1.579-60.392-24.493l-11.523-42.089c-2.43-8.877-1.804-18.314 1.778-26.792l28.404-67.223c3.207-7.59 11.959-11.143 19.549-7.936l95.903 40.522c7.59 3.207 11.143 11.959 7.936 19.549l-28.661 67.833c-3.424 8.103-9.363 14.891-16.941 19.361z"
                fill="#8c818f" />
            </g>
            <g>
              <path
                d="m365.606 340.222-95.903-40.522c-7.59-3.207-16.342.346-19.549 7.936l-2.323 5.498 87.776 37.088c7.59 3.207 11.143 11.959 7.936 19.549l-28.661 67.833c-3.424 8.103-9.363 14.891-16.94 19.361l-28.7 16.93c7.607.351 15.446-1.415 22.647-5.662l36.053-21.268c7.577-4.47 13.516-11.258 16.94-19.361l28.661-67.833c3.206-7.59-.347-16.342-7.937-19.549z"
                fill="#766d78" />
            </g>
            <g>
              <path
                d="m408.713 8.678 2.588-6.124c.898-2.126 3.35-3.122 5.476-2.223l55.983 23.654c2.126.898 3.121 3.35 2.223 5.476l-2.588 6.124c-7.43 17.585-27.71 25.818-45.295 18.387-17.585-7.429-25.817-27.708-18.387-45.294z"
                fill="#e3e0e4" />
            </g>
            <g>
              <path
                d="m433.174 497.137c4.644 0 8.074-4.479 6.698-8.914-5.011-16.145-20.058-27.871-37.852-27.871-7.894 0-15.243 2.317-21.421 6.294-7.961-18.943-26.689-32.247-48.525-32.247-8.303 0-16.154 1.93-23.137 5.355-9.069-33.798-39.912-58.683-76.572-58.683-38.231 0-70.139 27.062-77.62 63.074-8.603-6.129-19.12-9.746-30.487-9.746-20.855 0-38.875 12.134-47.388 29.727-5.124-2.417-10.846-3.774-16.887-3.774-17.793 0-32.84 11.726-37.852 27.871-1.377 4.435 2.054 8.914 6.698 8.914z"
                fill="#cf9875" />
            </g>
            <g>
              <path
                d="m439.871 488.223c-5.011-16.145-20.058-27.871-37.852-27.871-7.894 0-15.243 2.317-21.421 6.294-7.961-18.943-26.689-32.247-48.525-32.247-8.304 0-16.154 1.93-23.137 5.355-9.069-33.798-39.912-58.683-76.572-58.683-22.792 0-43.334 9.622-57.796 25.022 8.651-3.24 18.014-5.022 27.796-5.022 28.396 0 53.302 14.93 67.302 37.367 6.503 10.421 18.024 16.488 30.298 16.002.7-.028 1.403-.042 2.11-.042 15.013 0 28.555 6.288 38.141 16.374 7.037 7.405 17.265 10.942 27.418 9.82 1.44-.159 2.904-.241 4.387-.241 13.38 0 25.205 6.632 32.38 16.785h28.774c4.644.001 8.074-4.478 6.697-8.913z"
                fill="#c7865b" />
            </g>
          </g>
        </svg>
      </div>
      <div class="total">
        <p smooth-text-changer>
          {{ cost.plot }}
        </p>
      </div>
    </div>
  </div>

  <div class="form">
    <ng-container *ngIf="
      (staticEntity
      | cast_to_building)
      | compute_improvement_type
      as improvementType">
      <form
        [formGroup]="buildingImprovement"
        (ngSubmit)="onBuildingImprovement(
          buildingImprovement,
          improvementType
        )">
        <div class="control">
  
          <div class="input">
            <label>
              Workforce
              <br>
              <small>
                [ {{ minWorkforce }}, {{ minWorkforce * 2 }} ]
              </small>
            </label>
            <input
              type="number"
              formControlName="workforce"
              [min]="minWorkforce"
              [max]="minWorkforce * 2"
              (change)="onWorkforceChange($event)">
          </div>
          <div class="time-cost">
            <div class="resource">
              <div class="icon">
                <svg id="Capa_1" enable-background="new 0 0 20 20" height="13pt" viewBox="0 0 512 512" width="13pt"
                  xmlns="http://www.w3.org/2000/svg">
                  <g>
                    <circle cx="256" cy="256" fill="#eab14d" r="256" />
                    <path
                      d="m256 0c-4.57 0-9.111.125-13.622.361 135.052 7.082 242.379 118.824 242.379 255.639s-107.327 248.557-242.379 255.639c4.511.236 9.052.361 13.622.361 141.385 0 256-114.615 256-256s-114.615-256-256-256z"
                      fill="#e49542" />
                    <circle cx="256" cy="256" fill="#f4fbff" r="199.487" />
                    <path
                      d="m256 56.513c-5.525 0-10.994.235-16.405.675 102.499 8.344 183.083 94.163 183.083 198.812s-80.584 190.467-183.083 198.812c5.411.441 10.88.676 16.405.676 110.174 0 199.487-89.314 199.487-199.487s-89.313-199.488-199.487-199.488z"
                      fill="#daf1f4" />
                    <g>
                      <g>
                        <path
                          d="m256 117.911c-4.267 0-7.726-3.459-7.726-7.726v-11.34c0-4.267 3.459-7.726 7.726-7.726s7.727 3.459 7.727 7.726v11.34c0 4.267-3.46 7.726-7.727 7.726z"
                          fill="#2b4d66" />
                      </g>
                      <g>
                        <path
                          d="m358.687 160.794c-1.978 0-3.955-.755-5.464-2.263-3.017-3.018-3.017-7.909.001-10.927l8.019-8.018c3.017-3.018 7.909-3.017 10.927 0 3.017 3.018 3.017 7.909-.001 10.927l-8.019 8.019c-1.509 1.507-3.486 2.262-5.463 2.262z"
                          fill="#2b4d66" />
                      </g>
                      <g>
                        <path
                          d="m412.315 263.727h-11.34c-4.268 0-7.726-3.459-7.726-7.726s3.459-7.726 7.726-7.726h11.34c4.268 0 7.726 3.459 7.726 7.726s-3.459 7.726-7.726 7.726z"
                          fill="#2b4d66" />
                      </g>
                      <g>
                        <path
                          d="m366.11 374.433c-1.977 0-3.955-.755-5.464-2.263l-8.018-8.018c-3.017-3.018-3.017-7.909 0-10.928 3.018-3.016 7.909-3.016 10.928 0l8.018 8.018c3.017 3.018 3.017 7.909 0 10.928-1.509 1.508-3.487 2.263-5.464 2.263z"
                          fill="#2b4d66" />
                      </g>
                      <g>
                        <path
                          d="m255.158 420.043c-4.267 0-7.726-3.459-7.726-7.726v-11.34c0-4.268 3.459-7.726 7.726-7.726s7.726 3.459 7.726 7.726v11.34c0 4.267-3.459 7.726-7.726 7.726z"
                          fill="#2b4d66" />
                      </g>
                      <g>
                        <path
                          d="m144.452 373.837c-1.977 0-3.955-.755-5.463-2.264-3.018-3.017-3.017-7.909 0-10.927l8.019-8.018c3.018-3.016 7.909-3.017 10.927.001 3.017 3.017 3.017 7.909-.001 10.927l-8.019 8.018c-1.508 1.509-3.486 2.263-5.463 2.263z"
                          fill="#2b4d66" />
                      </g>
                      <g>
                        <path
                          d="m110.183 262.886h-11.34c-4.267 0-7.726-3.459-7.726-7.726s3.459-7.726 7.726-7.726h11.34c4.267 0 7.726 3.459 7.726 7.726.001 4.267-3.459 7.726-7.726 7.726z"
                          fill="#2b4d66" />
                      </g>
                      <g>
                        <path
                          d="m153.067 160.199c-1.977 0-3.954-.754-5.463-2.263l-8.019-8.018c-3.017-3.018-3.018-7.909-.001-10.927 3.018-3.017 7.909-3.018 10.927-.001l8.019 8.019c3.017 3.017 3.018 7.909.001 10.927-1.51 1.508-3.487 2.263-5.464 2.263z"
                          fill="#2b4d66" />
                      </g>
                    </g>
                    <g>
                      <path
                        d="m256 263.727h-65.62c-4.267 0-7.726-3.46-7.726-7.727s3.459-7.726 7.726-7.726h57.893v-98.297c0-4.267 3.459-7.726 7.726-7.726s7.726 3.459 7.726 7.726v106.023c.001 4.267-3.458 7.727-7.725 7.727z"
                        fill="#2b4d66" />
                    </g>
                    <g>
                      <path
                        d="m335.266 304.491c-1.19 0-2.396-.276-3.527-.857l-79.272-40.764c-3.795-1.951-5.289-6.609-3.338-10.404s6.609-5.29 10.405-3.338l79.272 40.763c3.795 1.952 5.29 6.61 3.338 10.404-1.371 2.665-4.075 4.196-6.878 4.196z"
                        fill="#da4a54" />
                    </g>
                    <circle cx="256" cy="256" fill="#365e7d" r="20.622" />
                  </g>
                </svg>
              </div>
              <div class="total time">
                <p smooth-text-changer>
                  {{
                    (staticEntity
                    | cast_to_instantiable_building)
                    | compute_construction_duration
                    : selectedWorkforce
                    : dynamicResearches
                    : now
                    : improvementLevel
                    | convert_to_readable_duration
                  }}
                </p>
              </div>
            </div>
          </div>
        </div>
  
        <div class="submit">
          <button
            noisemaker
            [disabled]="isInvalidForm(buildingImprovement)">
            ↑
          </button>
        </div>
        
      </form>
    </ng-container>
  </div>
  
</div>